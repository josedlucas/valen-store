import{J as N,k as U,G as A,K as R,r as G,o as a,f as l,b as t,e as v,I,t as n,i as o,F as m,A as _,h as p,v as y,B as J,q as b}from"./app-cfc4db12.js";import{u as K}from"./categories-95798628.js";import{u as O}from"./products-41943570.js";import{d as L,u as Z,a as g,r as $,m as j}from"./rules-b8b4ca5d.js";import{_ as Q,D as W}from"./DropZone-938f4edc.js";const X={class:"row my-5"},Y={class:"col-md-8"},tt={class:"card border-0 shadow-sm"},et={class:"card-body"},st={class:"mb-3"},ot=t("label",{for:"post-title",class:"form-label"}," Title ",-1),at={class:"text-danger mt-1"},lt={class:"text-danger mt-1"},it={class:"mb-3"},nt=t("label",{for:"post-content",class:"form-label"}," Content ",-1),dt={class:"text-danger mt-1"},rt={class:"text-danger mt-1"},ct={class:"col-md-4"},ut={class:"card border-0 shadow-sm"},mt={class:"card-body"},_t=t("h6",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-square",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"})]),b(" Action ")],-1),ht={class:"mt-3 text-center"},vt=["disabled"],pt={class:""},gt={key:0},bt={key:1},wt=["disabled"],ft={class:""},Vt={key:0},xt={key:1},yt=t("h6",{class:"mt-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-square",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"})]),b(" Category ")],-1),Lt={class:"mb-3"},qt={class:"text-danger mt-1"},zt={class:"text-danger mt-1"},Et={class:"mb-3"},Mt=t("h6",{class:"mt-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-square",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"})]),b(" Thumbnail ")],-1),Ct={class:"text-danger mt-1"},Pt={__name:"Edit",setup(St){L("required",$),L("min",j);const q={title:"required|min:5",content:"required|min:50",categories:"required"},{validate:z,errors:h,resetForm:kt}=Z({validationSchema:q}),{value:E}=g("title",null,{initialValue:""}),{value:M}=g("content",null,{initialValue:""}),{value:C}=g("categories",null,{initialValue:"",label:"category"}),{categoryList:S,getCategoryList:k}=K(),{product:r,getProduct:B,updateProduct:T,validationErrors:u,isLoading:d}=O(),s=N({title:E,content:M,categories:C,thumbnail:[]}),D=U();function F(){z().then(c=>{c.valid&&T(s)})}const H=c=>{console.log("ENTOS ES EL EVENT",c),s.thumbnail=c};return A(()=>{B(D.params.id),k()}),R(()=>{s.id=r.value.id,s.title=r.value.title,s.content=r.value.content,s.thumbnail=r.value.original_all_images,s.categories=r.value.categories}),(c,i)=>{var w,f,V,x;const P=G("v-select");return a(),l("form",{onSubmit:J(F,["prevent"])},[t("div",X,[t("div",Y,[t("div",tt,[t("div",et,[t("div",st,[ot,v(t("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>s.title=e),id:"post-title",type:"text",class:"form-control"},null,512),[[I,s.title]]),t("div",at,n(o(h).title),1),t("div",lt,[(a(!0),l(m,null,_((w=o(u))==null?void 0:w.title,e=>(a(),l("div",null,n(e),1))),256))])]),t("div",it,[nt,p(Q,{modelValue:s.content,"onUpdate:modelValue":i[1]||(i[1]=e=>s.content=e)},null,8,["modelValue"]),t("div",dt,n(o(h).content),1),t("div",rt,[(a(!0),l(m,null,_((f=o(u))==null?void 0:f.content,e=>(a(),l("div",null,n(e),1))),256))])])])])]),t("div",ct,[t("div",ut,[t("div",mt,[_t,t("div",ht,[t("button",{disabled:o(d),class:"btn btn btn-outline-primary me-2"},[v(t("div",pt,null,512),[[y,o(d)]]),o(d)?(a(),l("span",gt,"Processing...")):(a(),l("span",bt,"Save Draft"))],8,vt),t("button",{disabled:o(d),class:"btn btn-primary"},[v(t("div",ft,null,512),[[y,o(d)]]),o(d)?(a(),l("span",Vt,"Processing...")):(a(),l("span",xt,"Publish"))],8,wt)]),yt,t("div",Lt,[p(P,{multiple:"",modelValue:s.categories,"onUpdate:modelValue":i[2]||(i[2]=e=>s.categories=e),options:o(S),reduce:e=>e.id,label:"name",class:"form-control",placeholder:"Select category"},null,8,["modelValue","options","reduce"]),t("div",qt,n(o(h).categories),1),t("div",zt,[(a(!0),l(m,null,_((V=o(u))==null?void 0:V.categories,e=>(a(),l("div",null,n(e),1))),256))])]),t("div",Et,[Mt,p(W,{modelValue:s.thumbnail,"onUpdate:modelValue":[i[3]||(i[3]=e=>s.thumbnail=e),i[4]||(i[4]=e=>H(e))]},null,8,["modelValue"]),t("div",Ct,[(a(!0),l(m,null,_((x=o(u))==null?void 0:x.thumbnail,e=>(a(),l("div",null,n(e),1))),256))])])])])])])],32)}}};export{Pt as default};
