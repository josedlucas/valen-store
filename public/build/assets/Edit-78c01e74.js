import{I as P,k as j,B as A,K as C,r as G,o as a,f as l,b as e,H,e as c,y as f,t as n,h as o,F as m,A as _,i as I,v as K}from"./app-e296914c.js";import{u as T}from"./roles-8f00f9e7.js";import{u as z}from"./users-0bdf29b9.js";import{d as V,u as J,a as v,r as O,m as Q}from"./rules-6c8ba336.js";const W={class:"row justify-content-center my-5"},X={class:"col-md-10"},Y={class:"card border-0 shadow-sm"},Z={class:"card-body"},$={class:"mb-3"},ee=e("label",{for:"user-title",class:"form-label"},"Name",-1),se={class:"text-danger mt-1"},te={class:"text-danger mt-1"},oe={class:"mb-3"},ae=e("label",{for:"email",class:"form-label"},"Email",-1),le={class:"text-danger mt-1"},ie={class:"text-danger mt-1"},ne={class:"mb-3"},re=e("label",{for:"password",class:"form-label"},"Password",-1),de={class:"text-danger mt-1"},ue={class:"text-danger mt-1"},ce={class:"mb-3"},me=e("label",{for:"user-category",class:"form-label"}," Role ",-1),_e={class:"text-danger mt-1"},ve={class:"text-danger mt-1"},pe={class:"mt-4"},fe=["disabled"],he={class:""},be={key:0},we={key:1},ke={__name:"Edit",setup(ge){const{roleList:y,getRoleList:U}=T(),{updateUser:F,getUser:k,user:r,validationErrors:d,isLoading:p}=z();V("required",O),V("min",Q);const E={name:"required",email:"required",password:"min:8"},{validate:R,errors:u,resetForm:xe}=J({validationSchema:E}),{value:q}=v("name",null,{initialValue:""}),{value:B}=v("email",null,{initialValue:""}),{value:L}=v("password",null,{initialValue:""}),{value:S}=v("role_id",null,{initialValue:"",label:"role"}),t=P({name:q,email:B,password:L,role_id:S}),D=j();function M(){R().then(h=>{h.valid&&F(t)})}return A(()=>{k(D.params.id),U()}),C(()=>{t.id=r.value.id,t.name=r.value.name,t.email=r.value.email,t.role_id=r.value.role_id}),(h,i)=>{var b,w,g,x;const N=G("v-select");return a(),l("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("form",{onSubmit:H(M,["prevent"])},[e("div",$,[ee,c(e("input",{"onUpdate:modelValue":i[0]||(i[0]=s=>t.name=s),id:"user-title",type:"text",class:"form-control"},null,512),[[f,t.name]]),e("div",se,n(o(u).name),1),e("div",te,[(a(!0),l(m,null,_((b=o(d))==null?void 0:b.name,s=>(a(),l("div",null,n(s),1))),256))])]),e("div",oe,[ae,c(e("input",{"onUpdate:modelValue":i[1]||(i[1]=s=>t.email=s),id:"email",type:"email",class:"form-control"},null,512),[[f,t.email]]),e("div",le,n(o(u).email),1),e("div",ie,[(a(!0),l(m,null,_((w=o(d))==null?void 0:w.email,s=>(a(),l("div",null,n(s),1))),256))])]),e("div",ne,[re,c(e("input",{"onUpdate:modelValue":i[2]||(i[2]=s=>t.password=s),id:"password",type:"password",class:"form-control"},null,512),[[f,t.password]]),e("div",de,n(o(u).password),1),e("div",ue,[(a(!0),l(m,null,_((g=o(d))==null?void 0:g.password,s=>(a(),l("div",null,n(s),1))),256))])]),e("div",ce,[me,I(N,{multiple:"",modelValue:t.role_id,"onUpdate:modelValue":i[3]||(i[3]=s=>t.role_id=s),options:o(y),reduce:s=>s.id,label:"name",class:"form-control"},null,8,["modelValue","options","reduce"]),e("div",_e,n(o(u).role_id),1),e("div",ve,[(a(!0),l(m,null,_((x=o(d))==null?void 0:x.role_id,s=>(a(),l("div",null,n(s),1))),256))])]),e("div",pe,[e("button",{disabled:o(p),class:"btn btn-success"},[c(e("div",he,null,512),[[K,o(p)]]),o(p)?(a(),l("span",be,"Processing...")):(a(),l("span",we,"Guardar"))],8,fe)])],32)])])])])}}};export{ke as default};
