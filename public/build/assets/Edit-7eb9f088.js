import{_ as M,o as r,f as d,b as t,t as f,e as y,a7 as R,h as p,z as S,F as x,A as L,H as k,k as U,I as $,p as w,B as N,S as q,K as O,y as j,i as I,j as T}from"./app-e363b16c.js";import{d as B,u as z,a as H,r as K,m as G}from"./rules-23909230.js";import{u as J}from"./roles-d9859e3c.js";const Q={class:"container"},W=["value"],X={class:"middle"},Y=["value"],Z={__name:"DualListBox",props:{leftLabel:{type:String,required:!0},rightLabel:{type:String,required:!0},leftData:{type:Array,required:!0},rightData:{type:Array,required:!0}},emits:["onChangeList"],setup(P,{emit:b}){let i=[],n=[];const h=b,s=P;function v(){if(!n.length)return;for(let e=n.length;e>0;e--){let o=s.rightData.indexOf(n[e-1]);s.rightData.splice(o,1),s.leftData.push(n[e-1]),n.pop()}let _=s.leftData,a=s.rightData;h("onChangeList",{leftData:_,rightData:a})}function g(){if(!i.length)return;for(let e=i.length;e>0;e--){let o=s.leftData.indexOf(i[e-1]);s.leftData.splice(o,1),s.rightData.push(i[e-1]),i.pop()}let _=s.leftData,a=s.rightData;h("onChangeList",{leftData:_,rightData:a})}return(_,a)=>(r(),d("div",Q,[t("div",null,[t("h2",null,f(s.leftLabel),1),y(t("select",{class:"form-select",multiple:"","onUpdate:modelValue":a[0]||(a[0]=e=>S(i)?i.value=e:i=e),onDblclick:g},[(r(!0),d(x,null,L(s.leftData,(e,o)=>(r(),d("option",{value:e,key:e.id},f(e.name),9,W))),128))],544),[[R,p(i)]])]),t("div",X,[t("button",{class:"btn btn-primary",onClick:k(g,["prevent"])},"=>"),t("button",{class:"btn btn-primary",onClick:k(v,["prevent"])},"<=")]),t("div",null,[t("h2",null,f(s.rightLabel),1),y(t("select",{class:"form-select",multiple:"","onUpdate:modelValue":a[1]||(a[1]=e=>S(n)?n.value=e:n=e),onDblclick:v},[(r(!0),d(x,null,L(s.rightData,(e,o)=>(r(),d("option",{value:e,key:e.id},f(e.name),9,Y))),128))],544),[[R,p(n)]])])]))}},ee=M(Z,[["__scopeId","data-v-b4e8872b"]]),te={class:"row justify-content-center my-5"},se={class:"col"},ae={class:"card border-0 shadow-sm"},ie={class:"card-body"},ne={class:"mb-3"},oe=t("label",{for:"post-title",class:"form-label"}," Title ",-1),le={class:"form-outline w-25"},re={class:"text-danger mt-1"},de={class:"text-danger mt-1"},ce={class:"mt-4"},ue=["disabled"],me={key:0,class:"spinner-border spinner-border-sm",role:"status"},pe={key:1},_e={key:2},ge={__name:"Edit",setup(P){B("required",K),B("min",G);const b={name:"required|min:3"},{validate:i,errors:n}=z({validationSchema:b}),{value:h}=H("name",null,{initialValue:""}),{role:s,updateRolePermissions:v,getRole:g,validationErrors:_,isLoading:a}=J(),e=U(),o=$({name:h}),C=w([]),D=w([]);N(async()=>{const l=(await q.get("/api/permissions/")).data.data,u=(await q.get(`/api/role-permissions/${e.params.id}`)).data.data;C.value=A(l,u),D.value=u,g(e.params.id)}),O(()=>{var c,l;o.id=(c=s.value)==null?void 0:c.id,o.name=(l=s.value)==null?void 0:l.name});function V(){i().then(c=>{if(c.valid){const l=D.value.map(m=>m.id);v(o,l)}})}function F(c){}function A(c,l){return c.filter(m=>!l.some(u=>m.id===u.id))}return(c,l)=>{var m;return r(),d("div",te,[t("div",se,[t("div",ae,[t("div",ie,[t("form",{onSubmit:k(V,["prevent"])},[t("div",ne,[oe,t("div",le,[y(t("input",{"onUpdate:modelValue":l[0]||(l[0]=u=>o.name=u),id:"post-title",type:"text",class:"form-control"},null,512),[[j,o.name]])]),t("div",re,f(p(n).name),1),t("div",de,[(r(!0),d(x,null,L((m=p(_))==null?void 0:m.name,(u,E)=>(r(),d("div",{key:E},f(u),1))),128))])]),I(ee,{leftLabel:"Available Permissions",rightLabel:"Current Permissions",leftData:C.value,rightData:D.value,onOnChangeList:F},null,8,["leftData","rightData"]),t("div",ce,[t("button",{disabled:p(a),class:"btn btn-success"},[p(a)?(r(),d("div",me)):T("",!0),p(a)?(r(),d("span",pe,"Processing...")):(r(),d("span",_e,"Update"))],8,ue)])],32)])])])])}}};export{ge as default};
