import{J as T,k as U,G as N,K as A,r as R,o as a,f as l,b as t,e as v,I as G,t as n,i as o,F as u,A as m,h,v as y,B as I,q as g}from"./app-0cb33df6.js";import{u as J}from"./categories-99b3fbd8.js";import{u as K}from"./products-1010f7bf.js";import{d as L,u as Z,a as p,r as $,m as j}from"./rules-00a576d7.js";import{_ as O,D as Q}from"./DropZone-1ff0b9bb.js";const W={class:"row my-5"},X={class:"col-md-8"},Y={class:"card border-0 shadow-sm"},tt={class:"card-body"},et={class:"mb-3"},st=t("label",{for:"post-title",class:"form-label"}," Title ",-1),ot={class:"text-danger mt-1"},at={class:"text-danger mt-1"},lt={class:"mb-3"},it=t("label",{for:"post-content",class:"form-label"}," Content ",-1),nt={class:"text-danger mt-1"},dt={class:"text-danger mt-1"},rt={class:"col-md-4"},ct={class:"card border-0 shadow-sm"},ut={class:"card-body"},mt=t("h6",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-square",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"})]),g(" Action ")],-1),_t={class:"mt-3 text-center"},vt=["disabled"],ht={class:""},pt={key:0},gt={key:1},bt=["disabled"],wt={class:""},ft={key:0},Vt={key:1},xt=t("h6",{class:"mt-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-square",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"})]),g(" Category ")],-1),yt={class:"mb-3"},Lt={class:"text-danger mt-1"},qt={class:"text-danger mt-1"},zt={class:"mb-3"},Mt=t("h6",{class:"mt-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-square",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"})]),g(" Thumbnail ")],-1),Ct={class:"text-danger mt-1"},Et={__name:"Edit",setup(kt){L("required",$),L("min",j);const q={title:"required|min:5",content:"required|min:50",categories:"required"},{validate:z,errors:_,resetForm:Bt}=Z({validationSchema:q}),{value:M}=p("title",null,{initialValue:""}),{value:C}=p("content",null,{initialValue:""}),{value:k}=p("categories",null,{initialValue:"",label:"category"}),{categoryList:B,getCategoryList:D}=J(),{product:r,getProduct:F,updateProduct:H,validationErrors:c,isLoading:d}=K(),s=T({title:M,content:C,categories:k,thumbnail:""}),P=U();function S(){z().then(b=>{b.valid&&H(s)})}return N(()=>{F(P.params.id),D()}),A(()=>{s.id=r.value.id,s.title=r.value.title,s.content=r.value.content,s.thumbnail=r.value.original_image,s.categories=r.value.categories}),(b,i)=>{var w,f,V,x;const E=R("v-select");return a(),l("form",{onSubmit:I(S,["prevent"])},[t("div",W,[t("div",X,[t("div",Y,[t("div",tt,[t("div",et,[st,v(t("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>s.title=e),id:"post-title",type:"text",class:"form-control"},null,512),[[G,s.title]]),t("div",ot,n(o(_).title),1),t("div",at,[(a(!0),l(u,null,m((w=o(c))==null?void 0:w.title,e=>(a(),l("div",null,n(e),1))),256))])]),t("div",lt,[it,h(O,{modelValue:s.content,"onUpdate:modelValue":i[1]||(i[1]=e=>s.content=e)},null,8,["modelValue"]),t("div",nt,n(o(_).content),1),t("div",dt,[(a(!0),l(u,null,m((f=o(c))==null?void 0:f.content,e=>(a(),l("div",null,n(e),1))),256))])])])])]),t("div",rt,[t("div",ct,[t("div",ut,[mt,t("div",_t,[t("button",{disabled:o(d),class:"btn btn btn-outline-primary me-2"},[v(t("div",ht,null,512),[[y,o(d)]]),o(d)?(a(),l("span",pt,"Processing...")):(a(),l("span",gt,"Save Draft"))],8,vt),t("button",{disabled:o(d),class:"btn btn-primary"},[v(t("div",wt,null,512),[[y,o(d)]]),o(d)?(a(),l("span",ft,"Processing...")):(a(),l("span",Vt,"Publish"))],8,bt)]),xt,t("div",yt,[h(E,{multiple:"",modelValue:s.categories,"onUpdate:modelValue":i[2]||(i[2]=e=>s.categories=e),options:o(B),reduce:e=>e.id,label:"name",class:"form-control",placeholder:"Select category"},null,8,["modelValue","options","reduce"]),t("div",Lt,n(o(_).categories),1),t("div",qt,[(a(!0),l(u,null,m((V=o(c))==null?void 0:V.categories,e=>(a(),l("div",null,n(e),1))),256))])]),t("div",zt,[Mt,h(Q,{modelValue:s.thumbnail,"onUpdate:modelValue":i[3]||(i[3]=e=>s.thumbnail=e)},null,8,["modelValue"]),t("div",Ct,[(a(!0),l(u,null,m((x=o(c))==null?void 0:x.thumbnail,e=>(a(),l("div",null,n(e),1))),256))])])])])])])],32)}}};export{Et as default};
