import{p as b,l as B,P as D,Q as L,J as M,G as U,K as A,o as l,f as o,b as e,B as N,e as g,I as E,t as m,i as n,F,A as S,v as R}from"./app-0cb33df6.js";import{d as V,u as j,a as k,r as G,m as I}from"./rules-00a576d7.js";function J(){const f=b({name:"",email:""}),c=B();D();const r=b({}),s=b(!1),_=L("$swal");return{profile:f,getProfile:async()=>{f.value=c.user},updateProfile:async p=>{s.value||(s.value=!0,r.value={},axios.put("/api/user",p).then(({data:a})=>{a.success&&(c.user=a.data,_({icon:"success",title:"Profile updated successfully"}))}).catch(a=>{var d;(d=a.response)!=null&&d.data&&(r.value=a.response.data.errors)}).finally(()=>s.value=!1))},validationErrors:r,isLoading:s}}const K={class:"card border-0"},Q=e("div",{class:"card-header bg-transparent"},[e("h5",{class:"float-start"},"Profile")],-1),T={class:"card-body"},$={class:"mb-3"},z=e("label",{for:"name",class:"form-label"},"Name",-1),C={class:"text-danger mt-1"},H={class:"text-danger mt-1"},O={class:"mb-3"},W=e("label",{for:"email",class:"form-label"},"Email",-1),X={class:"text-danger mt-1"},Y={class:"text-danger mt-1"},Z={class:"mb-3"},ee=["disabled"],se={class:""},ae={key:0},te={key:1},oe={__name:"index",setup(f){V("required",G),V("min",I);const c={name:"required|min:3",email:"required"},{validate:r,errors:s}=j({validationSchema:c}),{value:_}=k("name",null,{initialValue:""}),{value:y}=k("email",null,{initialValue:""}),{profile:v,getProfile:p,updateProfile:a,validationErrors:d,isLoading:h}=J(),t=M({name:_,email:y});function q(){r().then(P=>{P.valid&&a(t)})}return U(()=>{p()}),A(()=>{t.name=v.value.name,t.email=v.value.email}),(P,u)=>{var x,w;return l(),o("div",K,[Q,e("div",T,[e("form",{onSubmit:N(q,["prevent"])},[e("div",$,[z,g(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=i=>t.name=i),class:"form-control",id:"name"},null,512),[[E,t.name]]),e("div",C,m(n(s).name),1),e("div",H,[(l(!0),o(F,null,S((x=n(d))==null?void 0:x.name,i=>(l(),o("div",null,m(i),1))),256))])]),e("div",O,[W,g(e("input",{type:"email","onUpdate:modelValue":u[1]||(u[1]=i=>t.email=i),class:"form-control",id:"email"},null,512),[[E,t.email]]),e("div",X,m(n(s).email),1),e("div",Y,[(l(!0),o(F,null,S((w=n(d))==null?void 0:w.email,i=>(l(),o("div",null,m(i),1))),256))])]),e("div",Z,[e("button",{disabled:n(h),class:"btn btn-primary"},[g(e("div",se,null,512),[[R,n(h)]]),n(h)?(l(),o("span",ae,"Processing...")):(l(),o("span",te,"Update"))],8,ee)])],32)])])}}};export{oe as default};
